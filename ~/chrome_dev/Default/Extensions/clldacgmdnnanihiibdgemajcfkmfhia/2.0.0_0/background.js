(()=>{function e(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}console.log("Loaded..");chrome.runtime.onMessage.addListener((function(e,t,n){console.log(e),e.captureScreen&&(chrome.tabs.query({currentWindow:!0,active:!0},(async function(e){const t=e[0];let n=await(async()=>new Promise(((e,t)=>{chrome.tabs.captureVisibleTab(null,{format:"png"},(t=>{e(t)}))})))();chrome.tabs.sendMessage(t.id,{message:"init",screenshot:n})})),n())})),chrome.runtime.onInstalled.addListener((function(t){"install"==t.reason?chrome.storage.sync.set({installedOn:Date.now(),uid:e(),simplecolorpicker:!0}):"update"==t.reason&&chrome.storage.sync.get("uid",(t=>{t.uid?chrome.storage.sync.set({updatedOn:Date.now()}):chrome.storage.sync.set({updatedOn:Date.now(),uid:e(),simplecolorpicker:!0})}))})),chrome.runtime.onInstalled.addListener((function(e){"install"==e.reason&&(chrome.tabs.create({url:"https://bit.ly/cphiiii"}),chrome.tabs.query({currentWindow:!0},(function(e){for(let t=0;t<e.length;t++){let n=chrome.runtime.getManifest().content_scripts[0],r=[...n.js,...n.css];console.log(r),chrome.scripting.insertCSS({target:{tabId:e[t].id},files:[...n.css]}),chrome.scripting.executeScript({target:{tabId:e[t].id},files:[...n.js]},(()=>e=>{chrome.runtime.lastError}))}})))})),chrome.runtime.setUninstallURL("https://bit.ly/cpbye")})();